pipeline{
         agent any
       tools{
            maven 'maven 3.9.5'
             }
       stages{
        stage ('git checkout'){
            steps{
            git branch: 'master', url: 'https://github.com/gopilavuri/SimpleWebApp.git'
                  }
         }
             stage ('Build') {
             steps {
                sh 'mvn clean package'
                    }
                  }
            // stage ('copy to s3 bucket'){
                //  steps{
                // sh 'aws s3 cp /var/lib/jenkins/workspace/test-pipeline-webserver/server/target/server.jar s3://test-pipeline-webserver/'
                 //       }
                //     }
                  stage ('deploy') {
             steps {
                sshagent(['deploye_user']) {
    sh 'scp -o StrictHostKeyChecking=no webapp/target/webapp.war ubuntu@3.27.201.132:/home/ubuntu/apache-tomcat-10.1.15/webapps'
}
                    }
                  }
                   }
                 }

